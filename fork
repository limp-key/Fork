#!/bin/bash

if [ $# == 0 ] || [ $1 == '--help' ]
then
    echo
    echo 'Base'
    echo '--clear                 - remove fork test files'
    echo '--create {Type} {Name}  - create Controller or Model or Route file'
    echo '--install               - install all packate and programme for Fork'
    echo '--migration             - migration in database'
    exit;
fi

if [ $1 == '--clear' ]
then
    rm README.md
    rm Fork.conf
    rm controllers/ForkController.php
    rm models/ForkModel.php
    rm route/ForkRoute.php
    rm config/ForkConfig.php
    rm views/index.fork.html.php

elif [ $1 == '--create' ] && [ $2 != '' ]
then
    if  [ $2 == '-controller' ] 
    then
	if [ $3 != '' ]
	then
	    cp batch/Fork/Routine/Controller/Controller.php controllers/
	    mv controllers/Controller.php controllers/$3.php 
	    sed -i "s/__Name__/$3/" controllers/$3.php
	else
	    echo "Invalid name"
	fi
    elif [ $2 == '-model' ] 
    then
	if [ $3 != '' ]
	then
	    cp batch/Fork/Routine/Model/Model.php models/
	    mv models/Model.php models/$3.php
	    sed -i "s/__Name__/$3/" models/$3.php
	else
	    echo "Invalid name"
	fi
    elif [ $2 == '-route' ]
    then
	if [ $3 != '' ]
	then
	    cp batch/Fork/Routine/Route/Route.php route/
	    mv route/Route.php route/$3.php
	    sed -i "s/__Name__/$3/" route/$3.php
	else
	    echo "Invalid name"
	fi
    elif [ $2 == '-config' ]
    then
	if [ $3 ] && [ $3 != '' ]
	then
	    mkdir config/$3
	    cp batch/Fork/Routine/Config/Other/* config/$3
	    sed -i "s/__NAME__/$3/" config/$3/*.php
	else
	    cp batch/Fork/Routine/Config/Main/* config/
	fi
    else 
	echo "Invalid create type"
    fi
elif [ $1 == '--install' ]
then
    echo 'php'
elif [ $1 == '--migration' ]
then
    echo 'php'
else
    echo 'Invalid command'
fi
